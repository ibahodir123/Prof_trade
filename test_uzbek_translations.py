#!/usr/bin/env python3
"""
–¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —É–∑–±–µ–∫—Å–∫–∏—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤
"""
import sys
import os

# –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—É—â—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –≤ –ø—É—Ç—å –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞
sys.path.append(os.path.dirname(os.path.abspath(__file__)))

from ml_bot_binance import translate_to_uzbek, analyze_coin_signal_advanced_ema, bot_state

def test_uzbek_translations():
    """–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É–∑–±–µ–∫—Å–∫–∏—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤"""
    print("üá∫üáø –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É–∑–±–µ–∫—Å–∫–∏—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤")
    print("=" * 50)
    
    # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —É–∑–±–µ–∫—Å–∫–∏–π —è–∑—ã–∫
    bot_state.language = "uz"
    
    # –¢–µ—Å—Ç–æ–≤—ã–µ —Ç–µ–∫—Å—Ç—ã
    test_texts = [
        "üìà –°–∏–≥–Ω–∞–ª –¥–ª—è BTC/USDT",
        "üü¢ LONG - –°–∏–ª—å–Ω—ã–π",
        "‚ö™ –û–ñ–ò–î–ê–ù–ò–ï - –°–ª–∞–±—ã–π",
        "üí∞ –¶–µ–Ω–∞ –≤—Ö–æ–¥–∞: $50000.00",
        "üéØ Take Profit: $52000.00",
        "üõ°Ô∏è Stop Loss: $48000.00",
        "üìä RSI: 65.5",
        "ü§ñ ML —Å—Ç–∞—Ç—É—Å: –ê–∫—Ç–∏–≤–Ω–∞",
        "üí° –ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –û–ñ–ò–î–ê–ù–ò–ï:",
        "‚ùå –ù–ï –≤—Ö–æ–¥–∏—Ç—å –≤ –ø–æ–∑–∏—Ü–∏—é —Å–µ–π—á–∞—Å",
        "‚è≥ –ñ–¥–∞—Ç—å –ª—É—á—à–µ–≥–æ –º–æ–º–µ–Ω—Ç–∞ –¥–ª—è –≤—Ö–æ–¥–∞",
        "üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å —Ü–µ–Ω—É –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏",
        "üéØ –î–æ–∂–¥–∞—Ç—å—Å—è –±–æ–ª–µ–µ –±–ª–∞–≥–æ–ø—Ä–∏—è—Ç–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π",
        "üîô –ù–∞–∑–∞–¥",
        "–ê–Ω–∞–ª–∏–∑ –º–æ–Ω–µ—Ç—ã",
        "–ü–æ–∏—Å–∫ –º–æ–Ω–µ—Ç",
        "–°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã"
    ]
    
    print("–†—É—Å—Å–∫–∏–π ‚Üí –£–∑–±–µ–∫—Å–∫–∏–π:")
    print("-" * 30)
    
    for text in test_texts:
        translated = translate_to_uzbek(text, "uz")
        print(f"üá∑üá∫ {text}")
        print(f"üá∫üáø {translated}")
        print()
    
    print("‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!")

def test_coin_analysis():
    """–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–∞ –º–æ–Ω–µ—Ç—ã"""
    print("\nüìä –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–∞ –º–æ–Ω–µ—Ç—ã")
    print("=" * 50)
    
    # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
    bot_state.language = "ru"
    
    # –¢–µ—Å—Ç–∏—Ä—É–µ–º –∞–Ω–∞–ª–∏–∑ BTC
    print("üîç –ê–Ω–∞–ª–∏–∑–∏—Ä—É—é BTC/USDT...")
    try:
        signal_data = analyze_coin_signal_advanced_ema("BTC/USDT")
        
        if signal_data:
            print(f"‚úÖ –ê–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω!")
            print(f"üìä –°–∏–º–≤–æ–ª: {signal_data['symbol']}")
            print(f"üéØ –°–∏–≥–Ω–∞–ª: {signal_data['signal_type']}")
            print(f"üí™ –°–∏–ª–∞: {signal_data['strength_text']}")
            print(f"üí∞ –¶–µ–Ω–∞: ${signal_data['entry_price']:.8f}")
            
            # –¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–≤–æ–¥–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ —É–∑–±–µ–∫—Å–∫–∏–π
            bot_state.language = "uz"
            
            message = f"""
üìà **–°–∏–≥–Ω–∞–ª –¥–ª—è {signal_data['symbol']}**

{signal_data['signal_type']} - {signal_data['strength_text']}

üí∞ **–¶–µ–Ω–∞ –≤—Ö–æ–¥–∞:** ${signal_data['entry_price']:.8f}
üìä **RSI:** {signal_data['rsi']:.1f}
ü§ñ **ML —Å—Ç–∞—Ç—É—Å:** {signal_data['ml_status']}
            """
            
            if "LONG" in signal_data['signal_type']:
                message += f"""
üéØ **Take Profit:** ${signal_data['take_profit']:.8f}
üõ°Ô∏è **Stop Loss:** ${signal_data['stop_loss']:.8f}
                """
            elif "–û–ñ–ò–î–ê–ù–ò–ï" in signal_data['signal_type']:
                message += f"""

üí° **–ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –û–ñ–ò–î–ê–ù–ò–ï:**
‚Ä¢ ‚ùå **–ù–ï –≤—Ö–æ–¥–∏—Ç—å** –≤ –ø–æ–∑–∏—Ü–∏—é —Å–µ–π—á–∞—Å
‚Ä¢ ‚è≥ **–ñ–¥–∞—Ç—å** –ª—É—á—à–µ–≥–æ –º–æ–º–µ–Ω—Ç–∞ –¥–ª—è –≤—Ö–æ–¥–∞
‚Ä¢ üìä **–ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å** —Ü–µ–Ω—É –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
‚Ä¢ üéØ **–î–æ–∂–¥–∞—Ç—å—Å—è** –±–æ–ª–µ–µ –±–ª–∞–≥–æ–ø—Ä–∏—è—Ç–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π
                """
            
            translated_message = translate_to_uzbek(message)
            
            print("\nüá∫üáø –£–ó–ë–ï–ö–°–ö–ò–ô –ü–ï–†–ï–í–û–î:")
            print("-" * 30)
            print(translated_message)
        else:
            print("‚ùå –û—à–∏–±–∫–∞ –∞–Ω–∞–ª–∏–∑–∞")
            
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞: {e}")

if __name__ == "__main__":
    print("ü§ñ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É–∑–±–µ–∫—Å–∫–∏—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –≤ –±–æ—Ç–µ")
    print("=" * 60)
    
    # –¢–µ—Å—Ç–∏—Ä—É–µ–º –ø–µ—Ä–µ–≤–æ–¥—ã
    test_uzbek_translations()
    
    # –¢–µ—Å—Ç–∏—Ä—É–µ–º –∞–Ω–∞–ª–∏–∑ –º–æ–Ω–µ—Ç—ã
    test_coin_analysis()
    
    print("\nüéâ –í—Å–µ —Ç–µ—Å—Ç—ã –∑–∞–≤–µ—Ä—à–µ–Ω—ã!")
    print("üí° –î–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å Telegram —É–¥–∞–ª–∏—Ç–µ bot_config_local.json")






